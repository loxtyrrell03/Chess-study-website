:root{
  --bg:#ffffff; --fg:#0f172a; --muted:#475569;
  --border:#94a3b8; --borderW:2px;
  --panel:#ffffff; --panel-muted:#f8fafc;
  --accent:#0ea5e9; --accent-600:#0284c7; --accent-100:#e0f2fe;
}
html,body{background:var(--bg);color:var(--fg)}
.muted{color:var(--muted)}
.card{background:var(--panel);border:var(--borderW) solid var(--border);border-radius:14px;box-shadow:0 3px 10px rgba(15,23,42,.04)}
.block-sub{font-size:.75rem;letter-spacing:.08em;text-transform:uppercase;color:var(--muted)}
.block-title{font-size:1.125rem;line-height:1.75rem;font-weight:800}
.btn-xs{font-size:.72rem;padding:.25rem .5rem;border-radius:.5rem;border:var(--borderW) solid var(--border);background:#fff}
.btn-xxs{font-size:.68rem;padding:.18rem .45rem;border-radius:.4rem;border:var(--borderW) solid var(--border);background:#fff}
.chip{padding:.35rem .65rem;border-radius:9999px;border:var(--borderW) solid var(--border);display:inline-flex;gap:.35rem;align-items:center;background:#fff}
.chip:hover{background:var(--panel-muted)}
.chip-active{border-color:var(--accent);box-shadow:0 0 0 2px rgba(14,165,233,.2);background:var(--accent-100);color:#0b4661}
.link-card{display:flex;align-items:center;gap:.6rem;padding:.55rem .75rem;border-radius:.75rem;border:var(--borderW) solid var(--border);background:var(--panel)}
.link-card:hover{background:var(--panel-muted)}
.link-icon{width:18px;height:18px;display:inline-block}
.input{background:#fff;border:var(--borderW) solid var(--border);border-radius:.75rem;padding:.55rem .7rem}
.input:focus{outline:2px solid var(--accent-100);box-shadow:0 0 0 2px rgba(14,165,233,.25)}
.tabs-bar{display:flex;gap:0;border-bottom:var(--borderW) solid var(--border);background:var(--panel);border-radius:14px;padding:.35rem}
.tab-link{padding:.6rem 1rem;font-weight:800;color:var(--muted);border-radius:.6rem}
.tab-link:hover{color:#111827;background:var(--panel-muted)}
.tab-link.active{color:#0b4661;background:var(--accent-100);box-shadow:inset 0 0 0 1px rgba(14,165,233,.5)}
.tab-sep{width:1px;height:22px;background:linear-gradient(180deg,transparent,#cbd5e1,transparent);margin:0 .25rem}
#split{display:flex;gap:14px;align-items:stretch;--leftRatio:56%}
#leftPane{flex:0 0 var(--leftRatio);min-width:360px}
#rightPane{flex:1 1 auto;min-width:360px;max-width:900px}
#splitHandle{width:8px;border-radius:6px;background:linear-gradient(180deg,var(--accent),var(--accent-600));opacity:.65;cursor:col-resize;align-self:stretch;position:relative;user-select:none}
#splitHandle:hover{opacity:.95}
#splitHandle::after{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:2px;height:36px;background:rgba(0,0,0,.2);border-radius:2px}
@media (max-width:980px){#split{display:block}#splitHandle{display:none}#leftPane,#rightPane{width:100%}}
.outline-row{padding:.6rem .5rem;border-bottom:var(--borderW) solid var(--border);background:#fff}
.outline-row:hover{background:var(--panel-muted)}
.outline-active{background:var(--accent-100)!important;box-shadow:inset 0 0 0 1px rgba(14,165,233,.5)}
.clock-badge{font-family:ui-monospace,Menlo,Consolas,monospace;font-weight:800;background:var(--accent-100);color:var(--accent-600);padding:.35rem .6rem;border-radius:.75rem;border:var(--borderW) solid color-mix(in srgb,var(--accent) 35%,var(--border))}
.drag-ghost{opacity:.4}
.drag-over-outline{outline:2px dashed rgba(14,165,233,.9);outline-offset:4px}
.section-collapsed{margin-left:16px;background:var(--panel-muted);border:var(--borderW) dashed var(--border);border-radius:10px;padding:.45rem .6rem;font-size:.92rem;display:flex;align-items:center;justify-content:space-between}
.editor-shelf{display:flex;gap:.5rem;overflow-x:auto;padding:.5rem;border:var(--borderW) solid var(--border);border-radius:.75rem;background:#fff}
.editor-link-row{display:flex;align-items:center;gap:.5rem}
.no-print{print-color-adjust:exact}

/* ======= Progress bar visuals (ensure highlighted fill is visible) ======= */
#progressHost{position:relative; background:linear-gradient(180deg,#fff,#f9fafb)}
#progressFill{background:linear-gradient(90deg,var(--accent-100),color-mix(in srgb,var(--accent) 40%, transparent)); border-right:2px solid var(--accent-600); z-index:1}
#progressSegments{z-index:0}
#progressTicks{z-index:2}
#scrubOverlay{z-index:3}

/* ======= Modals ======= */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:80}
.modal.hidden{display:none}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.42);backdrop-filter:blur(2px)}
.modal-panel{position:relative;z-index:1;background:var(--panel);border:var(--borderW) solid var(--border);border-radius:14px;box-shadow:0 25px 70px rgba(15,23,42,.25);padding:18px;max-width:720px;width:calc(100% - 28px)}

/* Auth extras */
.auth-sep{display:flex;align-items:center;gap:.75rem;color:var(--muted);font-size:.9rem}
.auth-sep span{white-space:nowrap}
.auth-sep::before,.auth-sep::after{content:"";height:1px;background:color-mix(in srgb,var(--border) 70%,transparent);flex:1}
.btn-wide{min-width:160px;text-align:center}

/* ======= Helpers ======= */
.no-select{user-select:none!important}
